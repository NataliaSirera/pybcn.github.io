{% macro toc(node) %}
    {% if node.parent._model == 'event' %}
        <h3> <a href="{{ node.parent|url }}">{{ node.parent.title }}</a> </h3>
        <ul>
        {% for event_info in site.query(node.parent.path) %}
            <li>
                <a href="{{ event_info|url }}">{{ event_info.title }}</a>
                <ul>
                {% for child in event_info.children %}
                    <li><a href="{{ child|url }}">{{ child.title }}</a></li>
                {% endfor %}
                </ul>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        {{ toc(node.parent) }}
    {% endif %}
{% endmacro %}
